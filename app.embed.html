<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin="" />
<style>div#map{height:400px;width:100%;margin-bottom:25px;}div.info{padding:6px 8px;font:14px/16px Arial,Helvetica,sans-serif;background:#fff;background:rgba(255,255,255,.8);box-shadow:0 0 15px rgba(0,0,0,.2);border-radius:5px}div.info h4{margin:0 0 5px;color:#777}div.legend{line-height:18px;color:#555}div.legend i{width:18px;height:18px;float:left;margin-right:8px;opacity:.7}@media only screen and (max-device-width:480px){div.leaflet-right{width:100%}div.leaflet-control-attribution.leaflet-control{font-size:.75em;padding:10px 0;text-align:center;width:100%}}</style>
<div id="map"></div>
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>
<script>new Promise(function(e,t){var o=new XMLHttpRequest;o.onload=function(){e(JSON.parse(this.response))},o.open("get","https://raw.githubusercontent.com/jadeallencook/Earthquake-Map/master/js/USM.json"),o.send()}).then(function(e){var t=L.map("map").setView([40.7607793,-111.89104739999999],13);function o(e){return e<1&&(e=Math.round(100*e)),e<20?"#fdf5f1":e<40?"#f3c0a9":e<60?"#e9785a":e<80?"#c1352c":e<100?"#5d0e12":"#FFF"}function r(e){return{fillColor:o(e.properties.URM_URM_Pe),weight:2,opacity:1,color:"white",dashArray:"3",fillOpacity:.35}}function n(e){var t=e.target;t.setStyle({weight:2,color:"#fff",dashArray:"",fillOpacity:.75}),L.Browser.ie||L.Browser.opera||L.Browser.edge||t.bringToFront()}L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{attribution:'Developed by <a href="#" target="_blank">Jade Allen Cook</a> & <a href="#" target="_blank">Geoffery Thatcher</a> for <a href="#" target="_blank">Deseret News</a>',maxZoom:18,id:"mapbox.streets",accessToken:"pk.eyJ1IjoiamFkZWFsbGVuY29vayIsImEiOiJjamU3cTA5ZDgwNTNnMnFvMWRjdnI1aXYzIn0.63_s4EQVQur7r670eBY3DA",style:"mapbox://styles/mapbox/light-v9"}).addTo(t),L.geoJSON(e).addTo(t),L.geoJson(e,{style:r}).addTo(t),geojson=L.geoJson(e,{style:r,onEachFeature:function(e,t){t.on({click:n})}}).addTo(t);var a=L.control();function n(e){a.update({year:e.target.feature.properties.AvgYearBul,percent:Math.round(100*e.target.feature.properties.URM_URM_Pe)})}a.onAdd=function(e){return this._div=L.DomUtil.create("div","info"),this.update(),this._div},a.update=function(e){this._div.innerHTML="<h4>Will It Topple?</h4>",void 0!==e?(this._div.innerHTML+=e.percent+"% of buildings at risk<br />",this._div.innerHTML+="Average build is <b>"+e.year+"</b>"):this._div.innerHTML+="Click on an area!"},a.addTo(t);var i=L.control({position:"bottomright"});i.onAdd=function(e){for(var t=L.DomUtil.create("div","info legend"),r=[20,40,60,80,100],n=0;n<r.length;n++)t.innerHTML+='<i style="background:'+o(r[n]-1)+'"></i> ',t.innerHTML+=r[n]-20+"&ndash;"+r[n]+"%<br />";return t},i.addTo(t)})();</script>